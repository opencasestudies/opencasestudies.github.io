<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>scraping | Academic</title>
    <link>/tags/scraping/</link>
      <atom:link href="/tags/scraping/index.xml" rel="self" type="application/rss+xml" />
    <description>scraping</description>
    <generator>Source Themes Academic (https://sourcethemes.com/academic/)</generator><language>en-us</language><lastBuildDate>Mon, 19 Mar 2018 00:00:00 +0000</lastBuildDate>
    <image>
      <url>/img/icon-192.png</url>
      <title>scraping</title>
      <link>/tags/scraping/</link>
    </image>
    
    <item>
      <title>Introduction to Scraping and Wrangling Tables from Research Articles</title>
      <link>/post/introduction-to-scraping-and-wranging-tables-from-research-articles/</link>
      <pubDate>Mon, 19 Mar 2018 00:00:00 +0000</pubDate>
      <guid>/post/introduction-to-scraping-and-wranging-tables-from-research-articles/</guid>
      <description>


&lt;p&gt;By &lt;a href=&#34;https://www.libd.org/team/Stephen-Semick/&#34;&gt;Steve Semick&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;What do you do when you want to use results from the literature to anchor your own analysis? When these results are in the form of an easily accessible table, such as a .csv file or .xlsx file, then it is simple enough to download them and incorporate them into your research. Often times, however, published findings are not so easy to handle. Today, we’ll go through a practical scenario on scraping an html table from a &lt;a href=&#34;https://www.nature.com/articles/ng.2802/&#34;&gt;Nature Genetics article&lt;/a&gt; into R and wrangling the data into a useful format. This is what the online table we want to scrape looks like:&lt;/p&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;http://LieberInstitute.github.io/rstatsclub/post/2018-03-19-introduction-to-scraping-and-wranging-scientific-research-articles_files/blogpost01_table2_ng_screenshot.png&#34; width=&#34;800&#34; /&gt;

&lt;/div&gt;
&lt;div id=&#34;example-1a-scraping-a-html-table-from-a-webpage&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Example 1A: Scraping a html table from a webpage&lt;/h3&gt;
&lt;p&gt;Sometimes a table is online as part of a research article but can’t be easily coerced into a useful format. You can’t copy and paste the table into excel and its not stored elsewhere. In these situations you can use the handy R package &lt;code&gt;rvest&lt;/code&gt; to scrape it into R from the webpage.&lt;/p&gt;
&lt;p&gt;First load the &lt;code&gt;rvest&lt;/code&gt; package to scrape the table.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(&amp;quot;rvest&amp;quot;)
library(&amp;quot;knitr&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Next, get the url of the webpage where the table is stored.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;url &amp;lt;- &amp;quot;https://www.nature.com/articles/ng.2802/tables/2&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Now, the trickiest part of the process. We need find where the table lives on this webpage. An excellent guide to finding out how to do this can be found on &lt;a href=&#34;http://blog.corynissen.com/2015/01/using-rvest-to-scrape-html-table.html&#34;&gt;Cory Nissen’s blogpost&lt;/a&gt;– this is also where I learned about using &lt;code&gt;rvest&lt;/code&gt; to scrape html tables. Once you have copied the table location, the rest is easy!&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;table_path=&amp;#39;//*[@id=&amp;quot;content&amp;quot;]/div/div/figure/div[1]/div/div[1]/table&amp;#39;
nature_genetics_table2 &amp;lt;- url %&amp;gt;%
  read_html() %&amp;gt;%
  html_nodes(xpath=table_path) %&amp;gt;%
  html_table(fill=T)
nature_genetics_table2 = nature_genetics_table2[[1]]&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This is what the first few lines of our scraped product looks like:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;kable(nature_genetics_table2[1:4,])&lt;/code&gt;&lt;/pre&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&#34;header&#34;&gt;
&lt;th align=&#34;left&#34;&gt;SNPa&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Chr.&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Positionb&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Closest genec&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Major/minor alleles&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;MAFd&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Stage 1&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Stage 1&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Stage 2&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Stage 2&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Overall&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Overall&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Overall&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;SNPa&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Chr.&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Positionb&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Closest genec&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Major/minor alleles&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;MAFd&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;OR (95% CI)e&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Meta P value&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;OR (95% CI)e&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Meta P value&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;OR (95% CI)e&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Meta P value&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;I2 (%), P valuef&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;Known GWAS-defined associated genes&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Known GWAS-defined associated genes&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Known GWAS-defined associated genes&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Known GWAS-defined associated genes&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Known GWAS-defined associated genes&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Known GWAS-defined associated genes&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Known GWAS-defined associated genes&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Known GWAS-defined associated genes&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Known GWAS-defined associated genes&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Known GWAS-defined associated genes&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Known GWAS-defined associated genes&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Known GWAS-defined associated genes&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Known GWAS-defined associated genes&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;rs6656401&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;1&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;207692049&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;CR1&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;G/A&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;0.197&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;1.17 (1.12–1.22)&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;7.7 × 10−15&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;1.21 (1.14–1.28)&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;7.9 × 10−11&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;1.18 (1.14–1.22)&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;5.7 × 10−24&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;0, 7.8 × 10−1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;rs6733839&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;2&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;127892810&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;BIN1&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;C/T&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;0.409&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;1.21 (1.17–1.25)&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;1.7 × 10−26&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;1.24 (1.18–1.29)&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;3.4 × 10−19&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;1.22 (1.18–1.25)&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;6.9 × 10−44&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;28, 6.1 × 10−2&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;While this table has the information we want, it is clearly still a mess. Which brings us to…&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;example-1b-making-messy-data-useful&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Example 1B: Making messy data useful&lt;/h3&gt;
&lt;p&gt;Fortunately, there is the right number of columns, but there are lines of text breaking the table and stretching through at least one row of the table. There are two others (not shown), so getting these rows into better data format will be our first task.&lt;/p&gt;
&lt;div id=&#34;cleaning-up-the-rows&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Cleaning up the rows&lt;/h4&gt;
&lt;p&gt;We could look at the table and see these lines are on rows 2, 12, and 18. But let’s do this instead using some R code. The trick here is to note that all the elements of these rows contain the exact same text.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;v=which(apply(nature_genetics_table2,1, function(x) length(unique(unlist(x))) )==1)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Great, now let’s get rid of these rows but retain the information. We are going to do this in three steps. First, we will split the data.frame into a list based on the location of these descriptions (rows 2,12, and 18). Then, we will clean this list up by keeping only the list elements with data. We will move the text taking up entire rows to an additional column titled “Description”. Lastly, we will concatenate this cleaned list back into a data.frame.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;nature_genetics_table2_list = split(nature_genetics_table2, cumsum(1:nrow(nature_genetics_table2) %in% v))
nature_genetics_table2_list = lapply(nature_genetics_table2_list[2:4], function(y){ y$Description= unique(as.character(y[1,]) ) 
y[-1,] } )

nature_genetics_table2_clean = do.call(&amp;quot;rbind&amp;quot;,nature_genetics_table2_list)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Now let’s look at our data.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;kable(nature_genetics_table2_clean[1:3,])&lt;/code&gt;&lt;/pre&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&#34;header&#34;&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;SNPa&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Chr.&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Positionb&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Closest genec&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Major/minor alleles&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;MAFd&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Stage 1&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Stage 1&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Stage 2&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Stage 2&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Overall&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Overall&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Overall&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td&gt;1.3&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;rs6656401&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;1&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;207692049&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;CR1&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;G/A&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;0.197&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;1.17 (1.12–1.22)&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;7.7 × 10−15&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;1.21 (1.14–1.28)&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;7.9 × 10−11&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;1.18 (1.14–1.22)&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;5.7 × 10−24&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;0, 7.8 × 10−1&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Known GWAS-defined associated genes&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td&gt;1.4&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;rs6733839&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;2&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;127892810&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;BIN1&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;C/T&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;0.409&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;1.21 (1.17–1.25)&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;1.7 × 10−26&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;1.24 (1.18–1.29)&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;3.4 × 10−19&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;1.22 (1.18–1.25)&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;6.9 × 10−44&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;28, 6.1 × 10−2&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Known GWAS-defined associated genes&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td&gt;1.5&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;rs10948363&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;6&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;47487762&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;CD2AP&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;A/G&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;0.266&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;1.10 (1.07–1.14)&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;3.1 × 10−8&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;1.09 (1.04–1.15)&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;4.1 × 10−4&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;1.10 (1.07–1.13)&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;5.2 × 10−11&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;0, 9 × 10−1&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Known GWAS-defined associated genes&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;div id=&#34;fixing-column-names&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Fixing column names&lt;/h4&gt;
&lt;p&gt;It’s getting better but is still messy. Let’s clean up those columns names. This part we will do by hand.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;colnames(nature_genetics_table2_clean) &amp;lt;- c(&amp;quot;SNP&amp;quot;, &amp;quot;Chr&amp;quot;, &amp;quot;Position&amp;quot;, &amp;quot;Closest gene&amp;quot;, &amp;quot;Major/minor alleles&amp;quot;, &amp;quot;MAF&amp;quot;, &amp;quot;Stage1_OR&amp;quot;, &amp;quot;Stage1_MetaP&amp;quot;, &amp;quot;Stage2_OR&amp;quot;,&amp;quot;Stage2_MetaP&amp;quot;,    &amp;quot;Overall_OR&amp;quot;, &amp;quot;Overall_MetaP&amp;quot;, &amp;quot;I2_Percent/P&amp;quot;,&amp;quot;Description&amp;quot;)
colnames(nature_genetics_table2_clean)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1] &amp;quot;SNP&amp;quot;                 &amp;quot;Chr&amp;quot;                 &amp;quot;Position&amp;quot;           
##  [4] &amp;quot;Closest gene&amp;quot;        &amp;quot;Major/minor alleles&amp;quot; &amp;quot;MAF&amp;quot;                
##  [7] &amp;quot;Stage1_OR&amp;quot;           &amp;quot;Stage1_MetaP&amp;quot;        &amp;quot;Stage2_OR&amp;quot;          
## [10] &amp;quot;Stage2_MetaP&amp;quot;        &amp;quot;Overall_OR&amp;quot;          &amp;quot;Overall_MetaP&amp;quot;      
## [13] &amp;quot;I2_Percent/P&amp;quot;        &amp;quot;Description&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;making-a-character-variable-into-a-numeric-variable&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Making a character variable into a numeric variable&lt;/h4&gt;
&lt;p&gt;It’s coming along.. Next, we need to make the numbers into, well numbers. This will be more useful in R than a character class of data. To do this, try using the &lt;code&gt;as.numeric&lt;/code&gt; function as shown.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;as.numeric(nature_genetics_table2_clean$Stage1_MetaP)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning: NAs introduced by coercion&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1] NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;It doesn’t work because there are weird symbols that R doesn’t understand. Get rid of them with the &lt;code&gt;gsub&lt;/code&gt; command and replace them an E (scientific notation).&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;nature_genetics_table2_clean$Stage1_MetaP = gsub(&amp;quot; × 10&amp;quot;,&amp;quot;E&amp;quot;,nature_genetics_table2_clean$Stage1_MetaP)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Now try converting to a numeric.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;as.numeric(nature_genetics_table2_clean$Stage1_MetaP)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning: NAs introduced by coercion&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1] NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;It still doesn’t work!! Take a second closer look at the data. Can you discern why the code failed?&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;nature_genetics_table2_clean$Stage1_MetaP&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1] &amp;quot;7.7E-15&amp;quot; &amp;quot;1.7E-26&amp;quot; &amp;quot;3.1E-8&amp;quot;  &amp;quot;8.8E-10&amp;quot; &amp;quot;9.6E-17&amp;quot; &amp;quot;2.8E-11&amp;quot; &amp;quot;6.5E-16&amp;quot;
##  [8] &amp;quot;1.7E-9&amp;quot;  &amp;quot;5.1E-8&amp;quot;  &amp;quot;1.6E-8&amp;quot;  &amp;quot;3.3E-9&amp;quot;  &amp;quot;5.0E-11&amp;quot; &amp;quot;1.5E-7&amp;quot;  &amp;quot;4.6E-8&amp;quot; 
## [15] &amp;quot;9.6E-5&amp;quot;  &amp;quot;2.5E-6&amp;quot;  &amp;quot;1.3E-5&amp;quot;  &amp;quot;7.4E-6&amp;quot;  &amp;quot;6.7E-6&amp;quot;  &amp;quot;1.0E-5&amp;quot;  &amp;quot;1.6E-6&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Yep, that’s right the &lt;code&gt;−&lt;/code&gt; symbol is not in fact the same as a minus symbol &lt;code&gt;-&lt;/code&gt;! We need to replace it. We’ll use the fact that that symbol always appears immediately after a capital E to our advantage.&lt;/p&gt;
&lt;p&gt;Split the string on the E using &lt;code&gt;strsplit&lt;/code&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;s = strsplit(nature_genetics_table2_clean$Stage1_MetaP, &amp;quot;E&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Get the first and second half of each string.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;firstStr = lapply(s, `[[`, 1 )
secondStr=lapply(s, `[[`, 2 )&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Knock off that first character: which the symbol we don’t want and slap a minus sign back on .&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;secondStr= lapply(secondStr,function(x) {paste0(&amp;quot;E-&amp;quot;,substring(x,2))})&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Finally, stitch the two parts of the string back together now that the minus sign has been corrected and convert it to numeric.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;mapply( function(firstStr, secondStr) {as.numeric(paste0(firstStr,secondStr) )}, firstStr, secondStr )&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1] 7.7e-15 1.7e-26 3.1e-08 8.8e-10 9.6e-17 2.8e-11 6.5e-16 1.7e-09
##  [9] 5.1e-08 1.6e-08 3.3e-09 5.0e-11 1.5e-07 4.6e-08 9.6e-05 2.5e-06
## [17] 1.3e-05 7.4e-06 6.7e-06 1.0e-05 1.6e-06&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;It works! Make sure to replace the column in the data.frame.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;nature_genetics_table2_clean$Stage1_MetaP= mapply( function(firstStr, secondStr) {as.numeric(paste0(firstStr,secondStr) )}, firstStr, secondStr )&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;See how it appears in the table now as a numeric? Try wrangling the rest of these columns into a useful format on your own and let me know how it goes.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;kable(nature_genetics_table2_clean[1:3,])&lt;/code&gt;&lt;/pre&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&#34;header&#34;&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;SNP&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Chr&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Position&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Closest gene&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Major/minor alleles&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;MAF&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Stage1_OR&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;Stage1_MetaP&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Stage2_OR&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Stage2_MetaP&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Overall_OR&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Overall_MetaP&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;I2_Percent/P&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td&gt;1.3&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;rs6656401&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;1&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;207692049&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;CR1&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;G/A&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;0.197&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;1.17 (1.12–1.22)&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;1.21 (1.14–1.28)&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;7.9 × 10−11&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;1.18 (1.14–1.22)&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;5.7 × 10−24&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;0, 7.8 × 10−1&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Known GWAS-defined associated genes&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td&gt;1.4&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;rs6733839&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;2&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;127892810&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;BIN1&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;C/T&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;0.409&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;1.21 (1.17–1.25)&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;1.24 (1.18–1.29)&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;3.4 × 10−19&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;1.22 (1.18–1.25)&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;6.9 × 10−44&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;28, 6.1 × 10−2&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Known GWAS-defined associated genes&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td&gt;1.5&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;rs10948363&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;6&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;47487762&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;CD2AP&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;A/G&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;0.266&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;1.10 (1.07–1.14)&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;1.09 (1.04–1.15)&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;4.1 × 10−4&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;1.10 (1.07–1.13)&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;5.2 × 10−11&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;0, 9 × 10−1&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Known GWAS-defined associated genes&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;conclusions&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Conclusions&lt;/h3&gt;
&lt;p&gt;Today we went through getting data directly into R from an html table (a table on a webpage) and demonstrated how to get the data into a useful format. There are a couple advantages of doing this work in R instead of using excel– if that’s even an option. First, R is more reproducible. Second, once you have code for wrangling one table, wrangling the next one will be much faster. At the end of the day though, it is always easiest when the table is shared as a csv or excel file; something to keep in mind when preparing your own papers.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;reproducibility&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Reproducibility&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;## Session info ----------------------------------------------------------------------------------------------------------&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  setting  value                       
##  version  R version 3.4.4 (2018-03-15)
##  system   x86_64, mingw32             
##  ui       RTerm                       
##  language (EN)                        
##  collate  English_United States.1252  
##  tz       America/New_York            
##  date     2018-04-20&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Packages --------------------------------------------------------------------------------------------------------------&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  package   * version date       source                           
##  backports   1.1.2   2017-12-13 CRAN (R 3.4.3)                   
##  base      * 3.4.4   2018-03-15 local                            
##  blogdown    0.5.12  2018-03-23 Github (rstudio/blogdown@21f14af)
##  bookdown    0.7     2018-02-18 CRAN (R 3.4.3)                   
##  compiler    3.4.4   2018-03-15 local                            
##  curl        3.1     2017-12-12 CRAN (R 3.4.3)                   
##  datasets  * 3.4.4   2018-03-15 local                            
##  devtools  * 1.13.5  2018-02-18 CRAN (R 3.4.3)                   
##  digest      0.6.15  2018-01-28 CRAN (R 3.4.3)                   
##  evaluate    0.10.1  2017-06-24 CRAN (R 3.4.3)                   
##  graphics  * 3.4.4   2018-03-15 local                            
##  grDevices * 3.4.4   2018-03-15 local                            
##  highr       0.6     2016-05-09 CRAN (R 3.4.3)                   
##  htmltools   0.3.6   2017-04-28 CRAN (R 3.4.3)                   
##  httr        1.3.1   2017-08-20 CRAN (R 3.4.3)                   
##  knitr     * 1.20    2018-02-20 CRAN (R 3.4.3)                   
##  magrittr    1.5     2014-11-22 CRAN (R 3.4.3)                   
##  memoise     1.1.0   2017-04-21 CRAN (R 3.4.3)                   
##  methods   * 3.4.4   2018-03-15 local                            
##  R6          2.2.2   2017-06-17 CRAN (R 3.4.3)                   
##  Rcpp        0.12.16 2018-03-13 CRAN (R 3.4.4)                   
##  rmarkdown   1.9     2018-03-01 CRAN (R 3.4.3)                   
##  rprojroot   1.3-2   2018-01-03 CRAN (R 3.4.3)                   
##  rvest     * 0.3.2   2016-06-17 CRAN (R 3.4.3)                   
##  selectr     0.3-2   2018-03-05 CRAN (R 3.4.3)                   
##  stats     * 3.4.4   2018-03-15 local                            
##  stringi     1.1.7   2018-03-12 CRAN (R 3.4.4)                   
##  stringr     1.3.0   2018-02-19 CRAN (R 3.4.3)                   
##  tools       3.4.4   2018-03-15 local                            
##  utils     * 3.4.4   2018-03-15 local                            
##  withr       2.1.2   2018-03-15 CRAN (R 3.4.4)                   
##  xfun        0.1     2018-01-22 CRAN (R 3.4.3)                   
##  xml2      * 1.2.0   2018-01-24 CRAN (R 3.4.3)                   
##  yaml        2.1.18  2018-03-08 CRAN (R 3.4.3)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
</description>
    </item>
    
  </channel>
</rss>
